<!DOCTYPE html>
<html>
<head>
  <title>Big Data Project 1</title>

  <!-- META/CSS Start -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--<link rel="stylesheet" type="text/css" href="profile.css">-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- META/CSS End -->
</head>

<body style="background-color: #ddd;">

<header class="header">

<div class="container">

    <div class="row well" style="margin-top: 20px;">
        <div class="col-md-12">
            <h1 style="border-bottom: 1px solid dimgray;">Task 1</h1>
            <p id="task1Text" style="font-size: 1.8rem"></p>
            <small>(For some reason "Trump" appears really small comapred to the rest even thought it should be the largest word.)</small>
            <div id="graph1"></div>
        </div>
    </div>

    <div class="row well" style="margin-top: 20px;">
        <div class="col-md-12">
            <h1 style="border-bottom: 1px solid dimgray;">Task 2</h1>
            <p id="task2Text" style="font-size: 1.8rem"></p>
            <div id="graph2"></div>
        </div>
    </div>

    <div class="row well" style="margin-top: 20px;">
        <div class="col-md-12">
            <h1 style="border-bottom: 1px solid dimgray;">Task 3</h1>
            <p id="task3Text" style="font-size: 1.8rem"></p>
            <div id="graph3"></div>
        </div>
    </div>

</div>

<!-- Scripts Start -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="d3.js" charset="utf-8"></script>
<script src="d3.layout.cloud.js"></script>
<script src="d3.wordcloud.js"></script>
<script src="results/task1.js"></script>
<script src="results/task2.js"></script>
<script src="results/task3.js"></script>
<!--<script src="results/task4.js"></script>
<script src="results/task5.js"></script>
<script src="results/task6.js"></script>-->

<script>
  $(function() {
    //Task 1 presentation
    d3.wordcloud()
        .size([800, 800])
        .fill(d3.scale.ordinal().range(["#884400", "#448800", "#888800", "#444400"]))
        .selector('#graph1')
        .words(task1Data)
        .start();
    var text = "";
    task1Data.forEach(function(item){
        text += item.text + ": " + item.size + ", ";
    });
    $('#task1Text').text(text);

    //Task 2 presentation
    d3.wordcloud()
        .size([800, 800])
        .fill(d3.scale.ordinal().range(["#884400", "#448800", "#888800", "#444400"]))
        .selector('#graph2')
        .words(task2Data)
        .start();
    text = "";
    task2Data.forEach(function(item){
        text += item.text + ": " + item.size + ", ";
    });
    $('#task2Text').text(text);

    //Task 3 presentation
    var colorIndex = 0;
    var colors = ["#b1c841", "#c85e45", "#acc5d1", "#bd5cc1", "#4e72bf", "#296667"];
    var circles = [];
    var x = 40;
    var y = 40;
    var bit = 0;
    task3Data.forEach(function(item){
        circles.push({text: item.username, x_axis: x, y_axis: y, radius: 40, color:colors[colorIndex]});
        if(x < 800)
            x += 90;
        else {
            if(bit%2==0)
                x = 80;
            else
                x = 40;
            y += 90;
        }
        colorIndex = (colorIndex+1)%6;
    });

    var svg = d3.select("#graph3").append("svg")
    .attr("width", 800)
    .attr("height", 800);

    var elem = svg.selectAll("g myCircleText")
        .data(circles);

    var elemEnter = elem.enter()
	    .append("g")
      .attr("class", "node-group")
	    .attr("transform", function(d){return "translate("+d.x_axis+","+d.y_axis+")"});
    
    var circleInner = elemEnter.append("circle")
	    .attr("r", function(d){return d.radius} )
	    .attr("stroke", function(d) {return d.color;})
	    .attr("fill", function(d) {return d.color;});

    elemEnter.append("text")
	    .text(function(d){return d.text})
    .attr({
      "text-anchor": "middle",
      "font-size": function(d) { 
        return d.radius/((d.radius*10)/100);
        },
      "dy": function(d) {
        return d.radius/((d.radius*25)/100);
      }
    });



  });

</script>
<!-- Scripts End -->

</body>

</html>